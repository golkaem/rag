# RAG-система

RAG (Retrieval-Augmented Generation) система для извлечения информации из PDF-документов с использованием OCR, векторного поиска и LLM (GigaChat).

Пайплайн состоит из следующих этапов:

1. OCR и парсинг PDF
2. Разбиение на чанки
3. Индексация чанков
4. Генерация ответов LLM на основе найденного контекста (чанков)


## Структура проекта

```
data/
 ├── pdfs/            # исходные PDF (не входят в репозиторий)
 └── questions.json   # вопросы

src/
 ├── parse_pdf.py     # извлекает текст из PDF
 ├── chunking.py      # разбивает текст на чанки
 ├── index.py         # строит FAISS-индекс
 ├── retrieve.py      # ищет релевантные чанки по вопросу
 ├── answer.py        # генерирует промпт и получает ответы от LLM
 └── main.py          # основной скрипт
```


#### PDF-файлы

Исходные PDF-файлы не коммитятся в репозиторий, так как занимают много места.
Для работы системы необходимо добавить PDF-файлы в папку `data/pdfs/`.


После запуска кода появляются следующие папки (не входят в репозиторий):
```
data/
 ├── parsed/          # текст, извлеченный из PDF (по страницам)
 ├── chunks/          # чанки текста
 └── index/           # FAISS индекс и метаданные
```

## Установка зависимостей

Создать виртуальное окружение и установить зависимости:

```bash
pip install -r requirements.txt
```


## Установка Tesseract OCR

Проект использует `pytesseract`, который требует установленный Tesseract.

### Windows

1. Скачать Tesseract и установить его.

2. В корне проекта создать файл `.env` и указать путь TESSERACT_PATH, например:

```
TESSERACT_PATH=C:\Program Files\Tesseract\tesseract.exe
```


### Linux

Установить командой:
```bash
sudo apt install tesseract-ocr
```

## Настройка GigaChat

Создать файл `.env` и указать токен:

```
GIGACHAT_TOKEN=API_ТОКЕН
```

## Запуск

Запустить основной скрипт, который формирует сабмишн файл:

```bash
python src/main.py
```
